<!DOCTYPE html>
<html>
    <head>
        <title>Map</title>

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="stylesheet" href="css/leaflet.css" />
        <link rel="stylesheet" href="css/bulma.min.css" />
        <link rel="stylesheet" href="css/style.css" />
    </head>

    <body>
        <div id="layout">
            <div id="sidebar-controls">
                <div class="sidebar-control">
                    <a href="#" class="sidebar-control-button" id="btn-search" data-container="#sidebar-search">
                        <svg class="icon24">
                            <use xlink:href="img/feather-sprite.svg#search"/>
                        </svg>
                    </a>
                </div>

                <div class="sidebar-control">
                    <a href="#" class="sidebar-control-button" id="btn-layers" data-container="#sidebar-layers">
                        <svg class="icon24">
                            <use xlink:href="img/feather-sprite.svg#layers"/>
                        </svg>
                    </a>
                </div>

                <div class="sidebar-control">
                    <a href="#" class="sidebar-control-button" id="btn-markers" data-container="#sidebar-markers">
                        <svg class="icon24">
                            <use xlink:href="img/feather-sprite.svg#map-pin"/>
                        </svg>
                    </a>
                </div>

                <div class="sidebar-control">
                    <a href="#" class="sidebar-control-button" id="btn-lines" data-container="#sidebar-lines">
                        <svg class="icon24">
                            <use xlink:href="img/feather-sprite.svg#maximize-2"/>
                        </svg>
                    </a>
                </div>

                <div class="sidebar-control">
                    <a href="#" class="sidebar-control-button" id="btn-tools" data-container="#sidebar-tools">
                        <svg class="icon24">
                            <use xlink:href="img/feather-sprite.svg#tool"/>
                        </svg>
                    </a>
                </div>

                <div class="sidebar-control">
                    <a href="#" class="sidebar-control-button" id="btn-info" data-container="#sidebar-info">
                        <svg class="icon24">
                            <use xlink:href="img/feather-sprite.svg#help-circle"/>
                        </svg>
                    </a>
                </div>
            </div>

            <div id="sidebar">
                <div class="sidebar-container" id="sidebar-search">
                    <div class="header">
                        <h2 data-i18n="sidebar.search.title">Search</h2>
                        <span class="close">
                            <svg class="icon24">
                                <use xlink:href="img/feather-sprite.svg#x"/>
                            </svg>
                        </span>
                    </div>

                    <div class="content">
                        <div class="field">
                            <div class="control">
                                <a id="btn-locate" data-i18n="sidebar.search.locate_me" class="button is-fullwidth is-success">Locate Me</a>
                            </div>
                            <p data-i18n="sidebar.search.locate_me_help" class="help">Center the map on your current location.</p>
                        </div>

                        <hr />
                        
                        <div class="field">
                            <div class="field has-addons">
                                <div class="control">
                                    <input id="input-search" class="input" type="text" placeholder="Location" data-i18n="sidebar.search.search_placeholder" data-i18n-target="placeholder">
                                </div>
                                <div class="control">
                                    <a id="btn-search" class="button is-info">
                                        <svg class="icon icon16">
                                            <use xlink:href="img/feather-sprite.svg#search"/>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                            <p data-i18n="sidebar.search.search_help" class="help">Search for a location (enter e.g. a city name or coordinates in various formats) and center the map.</p>
                        </div>
                    </div>
                </div>

                <div class="sidebar-container" id="sidebar-layers">
                    <div class="header">
                        <h2 data-i18n="sidebar.layers.title">Layers</h2>
                        <span class="close">
                            <svg class="icon24">
                                <use xlink:href="img/feather-sprite.svg#x"/>
                            </svg>
                        </span>
                    </div>

                    <div class="content">
                        <div class="field">
                            <label class="label" data-i18n="sidebar.layers.base">Base Layer:</label>
                            <div class="control">
                                <div class="select is-fullwidth">
                                    <select data-baselayer></select>
                                </div>
                            </div>
                            <p class="help is-hidden" data-baselayer-help data-i18n="sidebar.layers.base_help">Google Maps layers have been disabled</p>
                        </div>

                        <hr />

                        <div class="buttons">
                            <a id="btn-api-keys" class="button is-fullwidth is-success" data-add-keys-button data-i18n="sidebar.layers.apikeys">Add Your Own API Keys</a>
                        </div>

                        <div class="field">
                            <label class="label" data-i18n="sidebar.layers.additional">Additional Layers:</label>
                            <div class="control">
                                <label class="checkbox">
                                    <input data-hillshading-layer type="checkbox" />
                                    <span data-i18n="sidebar.layers.hillshading">Hillshading</span>
                                </label>
                            </div>
                        </div>
                        <div class="field">
                            <div class="control">
                                <label class="checkbox">
                                    <input data-german-npa-layer type="checkbox" />
                                    <span data-i18n="sidebar.layers.german_npa">German NPA</span>
                                </label>
                            </div>
                            <p class="help" data-i18n="sidebar.layers.german_npa_help"></p>
                            <div class="control">
                                <a class="button is-fullwidth is-warning" href="https://geodienste.bfn.de/schutzgebiete" target="_blank">
                                    <span data-i18n="sidebar.layers.german_npa_button">Official Web App</span>
                                    <svg class="icon icon-small">
                                        <use xlink:href="img/feather-sprite.svg#external-link"/>
                                    </svg>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="sidebar-container" id="sidebar-markers">
                    <div class="header">
                        <h2 data-i18n="sidebar.markers.title">Markers</h2>
                        <span class="close">
                            <svg class="icon24">
                                <use xlink:href="img/feather-sprite.svg#x"/>
                            </svg>
                        </span>
                    </div>
                    <div class="content">
                        <div class="field is-grouped">
                            <p class="control">
                                <a id="btn-add-marker" class="button is-success">
                                    <svg class="icon icon24">
                                        <use xlink:href="img/feather-sprite.svg#plus"/>
                                    </svg>
                                </a>
                            </p>
                            <p class="control">
                                <a id="btn-delete-markers" class="button is-danger">
                                    <svg class="icon icon24">
                                        <use xlink:href="img/feather-sprite.svg#trash-2"/>
                                    </svg>
                                </a>
                            </p>
                            <p class="control">
                                <a id="btn-marker-settings" class="button">
                                    <svg class="icon icon24">
                                        <use xlink:href="img/feather-sprite.svg#sliders"/>
                                    </svg>
                                </a>
                            </p>
                        </div>
                        <div id="marker-settings">
                            <div class="field">
                                <label class="label" data-i18n="sidebar.markers.settings.coordinates">Coordinates Display Format</label>
                                <div class="control">
                                    <div class="select">
                                        <select data-coordinates-format></select>
                                    </div>
                                </div>
                            </div>
                            <div class="field">
                                <label class="label" data-i18n="sidebar.markers.settings.defaultcolor">Default Color</label>
                                <div class="control">
                                    <label class="checkbox">
                                        <input data-random-color type="checkbox" />
                                        <span data-i18n="sidebar.markers.settings.randomcolors">Use random colors</span>
                                    </label>
                                </div>
                                <div class="control">
                                    <input class="input" data-color type="color" placeholder="Color">
                                </div>
                            </div>
                            <div class="field">
                                <label class="label" data-i18n="sidebar.markers.settings.defaultradius">Default Circle Radius (m)</label>
                                <div class="control">
                                    <input class="input" data-radius type="text" placeholder="Circle Radius" data-i18n="sidebar.markers.settings.defaultradius_placeholder" data-i18n-target="placeholder">
                                </div>
                            </div>
                            <div class="field is-grouped">
                                <div class="control">
                                    <button class="button" data-submit data-i18n="general.submit">Submit</button>
                                </div>
                                <div class="control">
                                    <button class="button" data-cancel data-i18n="general.cancel">Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="scrollable-content">
                        <div id="markers" class="scrollable-list"></div>
                    </div>
                </div>

                <div class="sidebar-container" id="sidebar-lines">
                    <div class="header">
                        <h2 data-i18n="sidebar.lines.title">Lines</h2>
                        <span class="close">
                            <svg class="icon24">
                                <use xlink:href="img/feather-sprite.svg#x"/>
                            </svg>
                        </span>
                    </div>
                    <div class="content">
                        <div class="field is-grouped">
                            <p class="control">
                                <a id="btn-add-line" class="button is-success">
                                    <svg class="icon icon24">
                                        <use xlink:href="img/feather-sprite.svg#plus"/>
                                    </svg>
                                </a>
                            </p>
                            <p class="control">
                                <a id="btn-delete-lines" class="button is-danger">
                                    <svg class="icon icon24">
                                        <use xlink:href="img/feather-sprite.svg#trash-2"/>
                                    </svg>
                                </a>
                            </p>
                            <p class="control">
                                <a id="btn-line-settings" class="button">
                                    <svg class="icon icon24">
                                        <use xlink:href="img/feather-sprite.svg#sliders"/>
                                    </svg>
                                </a>
                            </p>
                        </div>
                        <div id="line-settings">
                            <div class="field">
                                <label class="label" data-i18n="sidebar.lines.settings.defaultcolor">Default Color</label>
                                <div class="control">
                                    <label class="checkbox">
                                        <input data-random-color type="checkbox" />
                                        <span data-i18n="sidebar.lines.settings.randomcolors">Use random colors</span>
                                    </label>
                                </div>
                                <div class="control">
                                    <input class="input" data-color type="color" placeholder="Color">
                                </div>
                            </div>
                            <div class="field is-grouped">
                                <div class="control">
                                    <button class="button" data-submit data-i18n="general.submit">Submit</button>
                                </div>
                                <div class="control">
                                    <button class="button" data-cancel data-i18n="general.cancel">Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="scrollable-content">
                        <div id="lines" class="scrollable-list"></div>
                    </div>
                </div>

                <div class="sidebar-container" id="sidebar-tools">
                    <div class="header">
                        <h2 data-i18n="sidebar.tools.title">Tools</h2>
                        <span class="close">
                            <svg class="icon24">
                                <use xlink:href="img/feather-sprite.svg#x"/>
                            </svg>
                        </span>
                    </div>
                    <div class="content">
                        <div class="field">
                            <label class="label" data-i18n="sidebar.tools.language">Language</label>
                            <div class="control">
                                <div class="select is-fullwidth">
                                    <select data-language></select>
                                </div>
                            </div>
                        </div>

                        <hr />

                        <div class="field">
                            <div class="control">
                                <a id="btn-link" class="button is-fullwidth is-success" data-i18n="sidebar.tools.createlink">Create Link</a>
                            </div>
                            <p class="help" data-i18n="sidebar.tools.createlink_help">Create a link to this map, e.g. for sharing it with others.</p>
                        </div>

                        <hr />

                        <div class="field">
                            <div class="field"></span>
                                <div class="control">
                                    <a id="btn-export-json" class="button is-success is-fullwidth" data-i18n="sidebar.tools.exportjson">Export Full Map State (JSON)</a>
                                </div>
                            </div>
                            <div class="field">
                                <div class="control">
                                    <input id="inp-import-json" style="display: none;" type="file" name="files" />
                                    <a id="btn-import-json" class="button is-success is-fullwidth" data-i18n="sidebar.tools.importjson">Import Full Map State (JSON)</a>
                                </div>
                            </div>
                            <p class="help" data-i18n="sidebar.tools.exportjson_help">Export/import a JSON file containing the full map state.</p>
                        </div>

                        <hr />

                        <div class="field">
                            <div class="control">
                                <a id="btn-multi-markers" class="button is-fullwidth is-success" data-i18n="sidebar.tools.createmarkers">Create Multiple Markers</a>
                            </div>
                            <p class="help" data-i18n="sidebar.tools.createmarkers_help">Create multiple markes at once, i.e. by providing a list of coordinates.</p>
                        </div>
                    </div>
                </div>

                <div class="sidebar-container" id="sidebar-info">
                    <div class="header">
                        <h2 data-i18n="sidebar.info.title">Info</h2>
                        <span class="close">
                            <svg class="icon24">
                                <use xlink:href="img/feather-sprite.svg#x"/>
                            </svg>
                        </span>
                    </div>
                    <div class="content">
                        <div class="field">
                            <label class="label" data-i18n="sidebar.info.contact">Contact/Mail</label>
                            <p class="help" data-i18n="sidebar.info.contact_help">If you have any suggestions please feel free to contact me via e-mail.</p>
                            <div class="control">
                                <a class="button is-fullwidth is-warning" href="mailto:mail@florian-pigorsch.de" target="_blank">
                                    <span>mail@florian-pigorsch.de</span>
                                    <svg class="icon icon-small">
                                        <use xlink:href="img/feather-sprite.svg#mail"/>
                                    </svg>
                                </a>
                            </div>
                        </div>

                        <hr />

                        <div class="field">
                            <label class="label" data-i18n="sidebar.info.sources">Source Code/Github</label>
                            <p class="help" data-i18n="sidebar.info.sources_help">The code for this website is open source, hosted at Github.</p>
                            <div class="control">
                                <a class="button is-fullwidth is-warning" href="https://github.com/flopp/map" target="_blank">
                                    <span>github.com/flopp/map</span>
                                    <svg class="icon icon-small">
                                        <use xlink:href="img/feather-sprite.svg#external-link"/>
                                    </svg>
                                </a>
                            </div>
                        </div>

                        <hr />

                        <div class="field">
                            <label class="label" data-i18n="sidebar.info.support">Support/Paypal</label>
                            <p class="help" data-i18n="sidebar.info.support_help">This website is free to use, but - of course - some costs occur (hosting, domain, etc.). If you want to cover some of these costs, head over to Paypal.</p>
                            <div class="control">
                                <a class="button is-fullwidth is-warning" href="https://paypal.me/FPigorsch" target="_blank">
                                    <span>paypal.me/FPigorsch</span>
                                    <svg class="icon icon-small">
                                        <use xlink:href="img/feather-sprite.svg#external-link"/>
                                    </svg>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="map-container-leaflet" class="map-container"></div>
            <div id="map-container-google" class="map-container"></div>

            <div id="map-contextmenu" class="dropdown-menu" role="menu">
                <div class="dropdown-content">
                    <a id="map-contextmenu-addmarker" class="dropdown-item" data-i18n="menu.addmarker">ADD MARKER</a>
                    <a id="map-contextmenu-deletemarker" class="dropdown-item" data-i18n="menu.deletemarker">DELETE MARKER</a>
                    <a id="map-contextmenu-projection" class="dropdown-item" data-i18n="menu.waypointprojection">WAYPOINT PROJECTION</a>
                    <a id="map-contextmenu-centermap" class="dropdown-item" data-i18n="menu.centermap">CENTER MAP HERE</a>
                </div>
            </div>

            <div id="api-keys-dialog" class="modal">
                <div class="modal-background"></div>
                    <div class="modal-card">
                        <header class="modal-card-head">
                            <h2 class="modal-card-title" data-i18n="dialog.apikeys.title">Add Your Own API Keys</h2>
                            <button class="delete" data-cancel aria-label="close"></button>
                        </header>
                        <section class="modal-card-body">
                            <p data-i18n="dialog.apikeys.help">Adding your own API keys enables access to map layers from Google Maps. Your own API keys are only stored in your browser's local storage space. They are never transmitted to any servers except the corresponding Google Maps servers, and they are never part of any data export.</p>

                            <h3 class="is-size-4" data-i18n="dialog.apikeys.google">Google Maps API Key</h3>
                            <p data-i18n="dialog.apikeys.google_help">
                                Get your API Key for the Google Maps Javascript API from Google's API console.
                            </p>
                            <div class="field">
                                <div class="control">
                                    <a class="button is-warning" href="https://console.developers.google.com" target="_blank">
                                        <span data-i18n="dialog.apikeys.google_link">Google API Console</span>
                                        <svg class="icon icon-small">
                                            <use xlink:href="img/feather-sprite.svg#external-link"/>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                            <div class="field">
                                <div class="control">
                                    <input data-google-api-key class="input" type="text" placeholder="Google API Key" data-i18n="dialog.apikeys.google_placeholder" data-i18n-target="placeholder">
                                </div>
                            </div>
                        </section>
                        <footer class="modal-card-foot">
                            <button class="button is-success" data-ok data-i18n="general.apply">Apply</button>
                            <button class="button" data-cancel data-i18n="general.cancel">Cancel</button>
                        </footer>
                    </div>
                </div>
            </div>

            <div id="projection-dialog" class="modal">
                <div class="modal-background"></div>
                <div class="modal-card">
                    <header class="modal-card-head">
                        <h2 class="modal-card-title" data-i18n="dialog.projection.title">Waypoint Projection</h2>
                        <button class="delete" data-cancel></button>
                    </header>
                    <section class="modal-card-body">
                        <h3 class="is-size-4" data-i18n="dialog.projection.data">Projection Data</h3>
                        <div class="field">
                            <div class="control">
                                <input data-distance class="input" type="text" placeholder="Distance (m)" data-i18n="dialog.projection.distance" data-i18n-target="placeholder">
                            </div>
                        </div>
                        <div class="field">
                            <div class="control">
                                <input data-bearing class="input" type="text" placeholder="Bearing (°)" data-i18n="dialog.projection.bearing" data-i18n-target="placeholder">
                            </div>
                        </div>

                        <h3 class="is-size-4" data-i18n="dialog.projection.marker">Created Marker</h3>
                        <div class="field">
                            <div class="control">
                                <input data-targetname class="input" type="text" placeholder="Name of created marker" data-i18n="dialog.projection.marker_name" data-i18n-target="placeholder">
                            </div>
                        </div>
                        <div class="field">
                            <div class="control">
                                <input data-targetcolor class="input" type="color" placeholder="Color of created marker" data-i18n="dialog.projection.marker_color" data-i18n-target="placeholder">
                            </div>
                        </div>
                        <div class="field">
                            <div class="control">
                                <input data-targetradius class="input" type="text" placeholder="Circle radius of created marker" data-i18n="dialog.projection.marker_radius" data-i18n-target="placeholder">
                            </div>
                        </div>

                        <h3 class="is-size-4" data-i18n="dialog.projection.line">Created Line</h3>
                        <div class="field">
                            <div class="control">
                                <label class="checkbox">
                                    <input data-line type="checkbox">
                                    <span data-i18n="dialog.projection.createline">Create line?</span>
                                </label>
                            </div>
                        </div>
                        <div class="field">
                            <div class="control">
                                <input data-linecolor class="input" type="color" placeholder="Color of created line" data-i18n="dialog.projection.line_color" data-i18n-target="placeholder">
                            </div>
                        </div>
                    </section>
                    <footer class="modal-card-foot">
                        <button class="button is-success" data-project data-i18n="dialog.projection.project">Perform Projection</button>
                        <button class="button" data-cancel data-i18n="general.cancel">Cancel</button>
                    </footer>
                </div>
            </div>

            <div id="link-dialog" class="modal">
                <div class="modal-background"></div>
                    <div class="modal-card">
                        <header class="modal-card-head">
                            <h2 class="modal-card-title" data-i18n="dialog.link.title">Create Map Link</h2>
                            <button class="delete" data-cancel aria-label="close"></button>
                        </header>
                        <section class="modal-card-body">
                            <p data-i18n="dialog.link.help">You can share this link with others to enable them to view your current map state.</p>

                            <div class="field has-addons">
                                <div class="control is-expanded">
                                    <input id="link-dialog-input" class="input" type="text" />
                                </div>
                                <div class="control">
                                    <a id="link-dilog-copy-button" data-clipboard-target="#link-dialog-input" class="button is-info" data-i18n="dialog.link.copy">
                                        Copy
                                    </a>
                                </div>
                                <p class="help is-hidden" data-i18n="dialog.link.toolong">TODO: Link too long</p>
                            </div>
                        </section>
                        <footer class="modal-card-foot">
                            <button class="button" data-cancel data-i18n="general.cancel">Close</button>
                        </footer>
                    </div>
                </div>
            </div>

            <div id="multi-markers-dialog" class="modal">
                <div class="modal-background"></div>
                <div class="modal-card">
                    <header class="modal-card-head">
                        <h2 class="modal-card-title" data-i18n="dialog.multimarkers.title">Create Multiple Markers</h2>
                        <button class="delete" data-cancel aria-label="close"></button>
                    </header>
                    <section class="modal-card-body">
                        <h3 class="is-size-4" data-i18n="dialog.multimarkers.commonattributes">Common Marker Attributes</h3>

                        <div class="columns">
                            <div class="column">
                                <label class="checkbox">
                                    <input type="checkbox" data-use-common-name>
                                    <span data-i18n="dialog.multimarkers.name">Name Prefix</span>
                                </label>
                                <div class="field">
                                    <div class="control">
                                        <input data-common-name class="input" type="text">
                                    </div>
                                </div>
                            </div>
                            <div class="column">
                                <label class="checkbox">
                                    <input type="checkbox" data-use-common-color>
                                    <span data-i18n="dialog.multimarkers.color">Color</span>
                                </label>
                                <div class="field">
                                    <div class="control">
                                        <input data-common-color class="input" type="color">
                                    </div>
                                </div>
                            </div>
                            <div class="column">
                                <label class="checkbox">
                                    <input type="checkbox" data-use-common-radius>
                                    <span data-i18n="dialog.multimarkers.radius">Circle Radius (m)</span>
                                </label>
                                <div class="field">
                                    <div class="control">
                                        <input data-common-radius class="input" type="text">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h3 class="is-size-4" data-i18n="dialog.multimarkers.data">Marker Data</h3>
                        <p>
                            <span data-i18n="dialog.multimarkers.format">Data format per line:</span><br />
                            <span data-format class="is-family-code"></span>
                        </p>

                        <textarea data-marker-data class="textarea is-family-code" placeholder="Marker Data"></textarea>
                    </section>
                    <footer class="modal-card-foot">
                        <button class="button is-success" data-go data-i18n="dialog.multimarkers.create">Create Markers</button>
                        <button class="button" data-cancel data-i18n="general.cancel">Cancel</button>
                    </footer>
                </div>
            </div>
        </div>

        <script src="js/api-keys.js"></script>
        <script src="js/bundle.js"></script>
        <!--TRACKING-->
    </body>
</html>
